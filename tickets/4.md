# Вопрос 4: Методы создания параметрических моделей в САПР. Параллельная параметризация.

При разработке моделей представления геометрических объектов САПР возникла потребность в механизме, позволяющем автоматически модифицировать форму созданной модели, изменяя значения задающих параметров.

Данная проблема была решена на основании методов создания параметрических моделей геометрических объектов, в основу построения которых был положен процесс их автоматической параметризации. При этом процесс создания параметрической модели представляет собой формирование количественных для каждого из всех составляющих её элементов с учётом их взаимного положения и отношений в виде функций от независимых параметров, которые определяют форму объекта или фигуры. В соответствие с теорией параметризации понимается процесс определения совокупности независимых параметров и их необходимого количества для полного определения формы объекта или фигуры в целом. В то же время параметрическая модель геометрического объекта определяет через эти общие параметры значения параметров каждого конкретного графического примитива.

Таким образом, в системах параметрического моделирования графические примитивы, составляющие в совокупности конструкторские объекты, сохраняют информацию о своих собственных параметрах в функции от базовых параметров объектов в целом и могут быть модифицированы практически в любой момент за счёт изменения значений этих базовых параметров.

![Методы создания параметрических моделей](../resources/imgs/3/pic.jpg)

Интерактивный подход создания параметрических моделей графических изображений - подход, при котором параметрическая модель создается специализированной автоматизированной системой.  

Интерактивный подход предполагает не только использование средств автоматической параметризации формируемых графических примитивов и образов, но и наличие встроенного в систему САПР механизма преобразования графического описания в параметрическую модель объекта.

Одним из методов реализации интерактивного подхода является **параллельная параметризация**.  

При параллельной параметризации параметрическая модель создается непосредственно в процессе формирования изображения. Создать параметрическую модель проще, так как при таком процессе легко обеспечить сохранность во внутренней структуре системы всех необходимых для этого данных о примитивах, способах их построения, ограничениях и связях между ними в требуемом виде. Одно из направлений реализации систем САПР, при котором модель строится одновременно c прорисовкой изображения, называют методом внутренней параметризации, подчеркивая тем самым особенность внутренней организации данных в таких системах и тот факт, что от конструктора для ее создания не требуется никаких дополнительных действий. Системы, основанные на механизмах внутренней параметризации, позволяют пользователю построить некий базовый вариант объекта, а затем менять его параметры - размерные обозначения, задавать условия построения, отношения и т.д. Все эти данные обрабатываются ядром системы и на этапе ввода контролируются на предмет корректности конечного результата. Помимо мощного вычислительного ядра здесь используются специальные структуры данных, необходимые для параллельного сохранения параметризованных моделей.

## Классификация методов организации систем с параллельной параметризацией:

1. _Жёсткая параметризация_

При жесткой параметризации создания модели объекта в системе сохраняется последовательность ее построения. Чаще всего такой подход называют хронологическим (history-based), a процесс моделирования - параметрическим конструированием (parametric design).

Каждая операция и соответствующие ей параметры (значения) записываются в порядке применения к формируемому объекту. Параметрами операции могут выступать не только числовые значения, но и выражения, соответствующие условиям ее выполнения. При этом конструктор в процессе создания изображения объекта последовательно и полностью задает все необходимые связи, однозначно определяя тем самым форму геометрической модели. В этом случае изменение значения какого-либо параметра или переопределение связей влечет за собой автоматическое изменение (модификацию) геометрии модели не требуя от конструктора каких-либо дополнительных редакторских действий.

B режиме жесткой параметризации возможны случаи, когда при изменении параметров геометрической модели решение вообще не может быть найдено, так как часть параметров и установленные связи вступают в противоречие друг с другом. Обычно такие ситуации отслеживает сама система параметризации, выводя при этом сообщения о невозможности построения изображения.

При подобном построении графической модели конструктор может использовать вспомогательные построения, например несущие окружности для дуг или предварительно сформированные вспомогательные линии и плоскости для задания положения или ориентации формируемого в дальнейшем элемента конструкции. Все эти вспомогательные конструктивные элементы включаются системой в структуру параметрической модели наряду с остальными компонентами и условиями.

2. _Предикатный подход_

При предикатном (Rule-based) подходе параметрическое описание модели формируется при помощи специфических языков программирования, широко используемых B экспертных системах, например Prolog, Lisp. Описание модели представляет набор правил построения, связывающих отдельные примитивы соответствующими взаимоотношениями. Предикат может задавать дистанцию между примитивами или характер расположения (параллельность, угол, перпендикулярность, касание и т. п.).

Модификация модели производится по цепочке связанных правил, затрагивая только задействованные в изменении компоненты.


3. _Объектно-ориентированная параметризация_

Объектно-ориентированная параметризация обеспечивает, во-первых, конструирование модели объекта на основе базовых операций над простыми примитивами. Этот способ является одним из подходов ассоциативного конструирования, с помощью которого определяется поведение геометрической формы при дальнейших изменениях. Он реализуется на основе определенного набора правил и атрибутов, задаваемых при выполнении базовой операции, в дополнение к уже заданным связям и ассоциативной геометрии. Базовые операции являются высокоэффективным инструментом для создания геометрической модели конструкции, инженерного анализа или изготовления.

Во-вторых, объектно-ориентированное моделирование предоставляет в распоряжение пользователя макрофункции, ранее определенные как последовательность действий, использующих булевы операции. Например, сквозное отверстие может быть представлено как булева операция вычитания цилиндра достаточной длины. Базовые операции также могут иметь и дополнительные атрибуты, которые используются в других приложениях, таких, как анализ и изготовление. При этом существуют несколько ограничений. В частности, используемая базовая операция должна быть полностью определена, и здесь прослеживается схожесть C механизмом жёсткой параметризации. После выполнения базовой операции ее топология должна сохраняться и распознаваться как базовая операция (отверстие, паз и т. д.), а также позволять изменять определяющие ее геометрические параметры (диаметр, глубина и т. д.). Определение базовой операции должно включать в себя правила, описывающие поведение геометрической формы, а также средств контроля соблюдения этих правил после выполнения базовой операции. Например, сквозное отверстие должно оставаться таковым, в то время как форма модели подвергается изменению.

В-третьих, для повышения эффективности процессов САПР при параллельной параметризации приложения для формирования документов (чертежей), инженерного анализа и изготовления должны иметь доступ к ранее созданному описанию объекта, не требуя при этом от пользователя дополнительной информации об объекте. (Относится к моделированию трехмерных моделей).

## Достоинства и недостатки параллельной параметризации

**Достоинством** метода параллельной параметризации является высокая степень автоматизации формирования модели.

Основные **недостатки** - частая невозможность импортирования подобных параметрических моделей в другие системы и неспособность автоматического построения в них параметрических моделей ранее созданных непараметрических изображений конструкторских объектов.

Первый недостаток определяется тем, что общепринятые электронные форматы обмена графической информацией (DWG, DXF, STEP, IGES и т. п.) не предполагают сохранения данных ни о способах, ни о последовательности формирования графических примитивов модели. В связи с этим импортирование параметрических описаний из одной системы в другую бессмысленно, так как импортированные модели оказываются непараметрическими.

Второй недостаток связан с тем, что системы параллельной параметризации не предназначены для параметризации непараметрических описаний, так как их разработчики, вероятно, считают, что это делать нецелесообразно, или их система и так работает эффективно.



Компания РТС разработала геометрическое ядро Granite One для своих систем, которое служит для создания ассоциативно совместимых друг с другом САВ/САМ/САЕ-систем и приложений. Granite заключает в себе возможности, позволяющие различным приложениям совершенно естественно читать файлы друг друга без использования трансляторов, анализировать прочитанную информацию и создавать новую геометрию. Ядро Granite включает в себя библиотеки, позволяющие осуществлять ассоциативное моделирование, a также среду разработки для быстрого создания и отладки приложений, написанных на Granite. Компании-разработчики прикладных систем и приложений, работающих с твердотельными моделями, могут использовать возможности Granite One no созданию иителлектуальных операций формирования графических объектов в качестве функционального ядра моделирования своих систем, а также для совместимости с другими САБ/САМ/САЕ-системами, тоже написанными на Granite.
